---
import '../styles/global.css';
import { Image } from 'astro:assets';
import BaseLayout from '../layouts/BaseLayout.astro';
import * as headings from '../texts/header.md';
const { submit_enquiry } = headings.frontmatter

let firstname = "";
let lastname = "";
let phone = "";
let message = "";
---

<BaseLayout title="Contact">
    <div class="green-bg beige-text ">

      <div class="relative z-20 biege-bg relative z-10 -mb-[5px] w-full h-[300px] md:h-[500px] xl:h-[700px] items-center justify-center px-6 bg-no-repeat bg-[position:100%_100%] bg-[length:360px_auto] md:bg-[length:700px_auto] xl:bg-[length:900px_auto] bg-[url('../assets/vector_assets/Website-Elements-01.svg')] ">
        
        <h1 class="green-text text-left global-header-text pt-10 xl:py-16 pl-10 xl:pl-20 ">Create an Enquiry</h1>

        <form class="flex flex-row md:gap-x-12 w-full " id="contactForm">
            
          <!-- Left Box -->
          <div class="green-text w-full md:w-1/2 p-4 sm:p-6 md:p-8 text-[0.33rem] md:text-[0.37rem] lg:text-[1.43rem]">
          
            <!-- Firstname -->
            <h3 class="pl-[10px] global-input-text font-semibold">Firstname</h3>
            <input class="beige-bg p-[10px] w-full h-[20px] md:h-[40px] xl:h-[50px] rounded-xl xl:rounded-[100px] mb-[10px] global-paragraph-text" id="firstname" type="text" name="fname" placeholder=""/>
            
            <!-- Surname -->
            <h3 class="pl-[10px] global-input-text font-semibold">Lastname</h3>
            <input class="beige-bg p-[10px] w-full h-[20px] md:h-[40px] xl:h-[50px] rounded-xl xl:rounded-[100px] mb-[10px] global-paragraph-text" id="lastname" type="text" name="lname" placeholder=""/>

            <!-- Phone -->
            <h3 class="pl-[10px] global-input-text font-semibold">Phone number</h3>
            <input class="beige-bg p-[10px] w-full h-[20px] md:h-[40px] xl:h-[50px] rounded-xl xl:rounded-[100px] mb-[10px] global-paragraph-text" id="phone" type="text" name="text" placeholder="" />
            
          </div>

          <!-- Right Box -->
          <div class="green-text relative w-full md:w-1/2 p-4 sm:p-6 md:p-8 text-[0.33rem] md:text-[0.37rem] lg:text-[1.43rem] ">

            <!-- Enquiry Details -->
            <h3 class="pl-[10px] global-input-text font-semibold">Enquiry Details</h3>
            <textarea class="beige-bg p-[10px] w-full h-[120px] md:h-[205px] xl:h-[250px] rounded-xl xl:rounded-[20px] mb-[10px] global-paragraph-text" id="message" name="text" placeholder="" />

            <!-- Submit button -->
            <div class="ml-[10%] md:ml-[20%] xl:ml-[40%] w-[90%] md:w-[80%] xl:w-[60%] my-[15px] md:my-[30px] md:my-[40px] beige-bg rounded-[190px] h-[30px] md:h-[70px] xl:h-[90px] ">
              <div class="texgyre-font rounded-t-lg md:rounded-t-[1rem] xl:rounded-t-[2rem] transition-colors duration-200 text-center " >
                <h1 class="global-minor-header-text py-2 md:py-4 xl:py-6 text-2xl md:text-4xl xl:text-6xl ">
                  <a class="block w-[100%] h-[100%] py-[5%] -my-[5%]" id="mailtoLink" href="mailto:admin@nmspeechpathology.com">{submit_enquiry}</a>
                </h1>
              </div>
					  </div>
            
            <!--<a href={`mailto:${contact_email}?subject=${subject}&body=${body}`}>Send Email</a>-->

          </div>
          
          <script>
            const mailtoLink = document.getElementById('mailtoLink') as HTMLAnchorElement;
            const firstnameInput = document.getElementById('firstname') as HTMLInputElement;
            const lastnameInput = document.getElementById('lastname') as HTMLInputElement;
            const phoneInput = document.getElementById('phone') as HTMLInputElement;
            const messageInput = document.getElementById('message') as HTMLTextAreaElement;

            function updateMailto() {
              const to = 'admin@nmspeechpathology.com';
              const subject = encodeURIComponent(`Web Enquiry: ${firstnameInput.value} ${lastnameInput.value}`);
              const body = encodeURIComponent(`Name: ${firstnameInput.value} ${lastnameInput.value}\nPhone: ${phoneInput.value}\n\n${messageInput.value}`);
              mailtoLink.href = `mailto:${to}?subject=${subject}&body=${body}`;
            }

            // Update mailto link whenever input changes
            [firstnameInput, phoneInput, lastnameInput, messageInput].forEach(input => {
              input.addEventListener('input', updateMailto);
            });

            mailtoLink.addEventListener('click', (e) => {
              // Prevent any accidental page reload/navigation:
              e.preventDefault();

              // Open the mailto link:
              window.location.href = mailtoLink.href;

              // Do NOT reset or reload the form, so inputs stay filled
            });

            updateMailto(); // initialize href on page load
            
          </script>
          
        </form>
        
      </div>
      <div class="relative z-15 dark-green-bg relative z-10 h-[50px] w-[100vw] py-[10px] -my-[15px]"></div>
    </div>
</BaseLayout>