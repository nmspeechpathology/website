---
import '../styles/global.css';
import '../styles/output.css';
const currentPath = Astro.url.pathname;
const normalizedPath = currentPath.replace(/\/+$/, '');
const tab_css = "px-4 md:px-8 xl:px-16 py-2 md:py-4 xl:py-8 rounded-t-lg md:rounded-t-[1rem] xl:rounded-t-[2rem] hover:bg-[rgba(18,43,18,1)] hover:text-[rgba(251,235,227,1)]"
---
<nav class="mt-3 heading-font uppercase md:mt-12 xl:mt-24 text-xs mobile:text-sm md:text-2xl xl:text-4xl flex justify-center items-center w-full max-full mx-auto " id="tabs">
  <div class="py-2 md:py-4 xl:py-9 rounded-t-lg md:rounded-t-[1rem] xl:rounded-t-[2rem] w-1/3 flex justify-center ">
    <div class="transition-colors duration-200 text-center">
      <a href="/" class={tab_css}> Home </a>
      <p id="myLink"></p>
    </div>
  </div>

  <div class="w-1/3 flex justify-center ">
    <div class="rounded-t-lg md:rounded-t-[1rem] xl:rounded-t-[2rem] transition-colors duration-200 text-center ">
      <a href="/services" class={tab_css}> Services </a>
      <p id="myLink2"></p>
    </div>
  </div>
  

  <div class="w-1/3 flex justify-center ">
    <div class="rounded-t-lg md:rounded-t-[1rem] xl:rounded-t-[2rem] transition-colors duration-200 text-center">
      <a href="/contact" class={tab_css} > Contact </a>
      <p id="myLink3"></p>
    </div>
  </div>

  <script>
    const currentPath = window.location.pathname.replace(/\/+$/, '');
    //document.getElementById('myLink')!.textContent = currentPath!;

    Array.from(document.querySelectorAll<HTMLAnchorElement>('#tabs a')).some(link => {
      const tab_css = "px-4 md:px-8 xl:px-16 py-2 md:py-4 xl:py-8 rounded-t-lg md:rounded-t-[1rem] xl:rounded-t-[2rem] hover:bg-[rgba(18,43,18,1)] hover:text-[rgba(251,235,227,1)]";
      const active_tab_css = "px-4 md:px-8 xl:px-16 py-2 md:py-4 xl:py-8 rounded-t-lg md:rounded-t-[1rem] xl:rounded-t-[2rem] hover:bg-[rgba(18,43,18,1)] hover:text-[rgba(251,235,227,1)] bg-[rgba(140,164,92,1)]";
      const dark_active_tab_css = "px-4 md:px-8 xl:px-16 py-2 md:py-4 xl:py-8 rounded-t-lg md:rounded-t-[1rem] xl:rounded-t-[2rem] hover:bg-[rgba(140,164,92,1)] hover:text-black bg-[rgba(18,43,18,1)] text-[rgba(251,235,227,1)]";
      const linkPath = link.href;
      const lastPath = link.pathname.split('/').filter(Boolean).pop();
      
      if (currentPath === "/" + lastPath) {
        //document.getElementById('myLink2')!.textContent = linkPath!;
        //document.getElementById('myLink3')!.textContent = lastPath!;

        if (lastPath == "services") {
          link.className = link.className.replace(tab_css, dark_active_tab_css);
        }

        else {
          link.className = link.className.replace(tab_css, active_tab_css);
        }
      }
      
      if (currentPath === "") {
        //document.getElementById('myLink2')!.textContent = linkPath!;
        //document.getElementById('myLink3')!.textContent = lastPath!;
        link.className = link.className.replace(tab_css, active_tab_css);
        return true;
      }
      return false
    });

  </script>
</nav>


